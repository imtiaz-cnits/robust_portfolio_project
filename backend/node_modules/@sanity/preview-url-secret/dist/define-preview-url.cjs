"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_chunks/constants-njScg_lu.cjs");exports.definePreviewUrl=function(t){const{draftMode:n,previewMode:r,origin:a=("undefined"==typeof location?"https://localhost":location.origin)}=t,o=(null==r?void 0:r.enable)||(null==n?void 0:n.enable);let{preview:i="/"}=t;const c=new URL(i,a),s=o?new URL(o,a):void 0;return async n=>{try{if(n.previewSearchParam){const e=new URL(n.previewSearchParam,c);e.origin===c.origin&&(i="".concat(e.pathname).concat(e.search))}else if(n.referrer){const e=new URL(n.referrer);e.origin===c.origin&&(i="".concat(e.pathname).concat(e.search))}}catch{}"undefined"!=typeof location&&location.origin===c.origin&&n.studioBasePath&&(i.startsWith("".concat(n.studioBasePath,"/"))||i===n.studioBasePath)&&(i=t.preview||"/");const r=new URL(i,c);if(s){const t=new URL(s),{searchParams:a}=t;return a.set(e.u,n.previewUrlSecret),r.pathname!==t.pathname&&a.set(e.b,"".concat(r.pathname).concat(r.search)),t.toString()}return r.toString()}};//# sourceMappingURL=define-preview-url.cjs.map
